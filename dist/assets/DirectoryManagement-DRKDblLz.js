import{s as _e}from"./statistics-DxPUy0bq.js";import{_ as T,j as fe,m as ve,k as ye,l as j,n as ne,q as Y,s as oe,t as ee,v as le,w as K,x as he,y as H,z as se,A as be,B as ge,C as pe,D as Ce,E as De,F as ke,G as we,H as te,I as X,J as ae,K as Se,L as Me,M as Fe,N as Ne,O as ie,P as de,Q as Ie,R as $e,S as Pe}from"./index-iXBYOgta.js";import{u as Ae}from"./directory-BorMR0YW.js";import{v as Q,c as f,o as r,F as t,a as l,O as c,r as i,T as C,h as x,U,aa as R,I as E,w as L,Q as w,S,f as F,Z as V,H as re,M as $,W as Te,X as xe,aw as Ee,P as q,an as J,aB as Oe}from"./vendor-cKlqYlgl.js";import"./utils-Dq7h7Pqt.js";const Ve={name:"DirectoryStats",components:{Folder:j,Document:ye,Monitor:ve,Clock:fe},props:{stats:{type:Object,required:!0}},setup(){const s=e=>e?new Date(e).toLocaleDateString("zh-CN",{month:"numeric",day:"numeric"}):"--";return Q(()=>{}),{formatDate:s}}},ze={class:"stats-grid"},Ue={class:"stats-card"},Re={class:"stats-icon folders"},Be={class:"stats-content"},We={class:"stats-number"},Le={class:"stats-card"},qe={class:"stats-icon files"},je={class:"stats-content"},He={class:"stats-number"},Qe={class:"stats-card"},Ge={class:"stats-icon storage"},Je={class:"stats-content"},Ke={class:"stats-number"},Xe={class:"stats-card"},Ze={class:"stats-icon time"},Ye={class:"stats-content"},et={class:"stats-number"};function tt(s,e,o,n,v,_){const u=i("Folder"),a=i("el-icon"),m=i("Document"),y=i("Monitor"),d=i("Clock");return r(),f("div",ze,[t("div",Ue,[t("div",Re,[l(a,{class:"stats-icon-svg"},{default:c(()=>[l(u)]),_:1})]),t("div",Be,[t("div",We,C(o.stats.totalFolders.toLocaleString()),1),e[0]||(e[0]=t("div",{class:"stats-label"},"总文件夹",-1))])]),t("div",Le,[t("div",qe,[l(a,{class:"stats-icon-svg"},{default:c(()=>[l(m)]),_:1})]),t("div",je,[t("div",He,C(o.stats.totalFiles.toLocaleString()),1),e[1]||(e[1]=t("div",{class:"stats-label"},"总文件",-1))])]),t("div",Qe,[t("div",Ge,[l(a,{class:"stats-icon-svg"},{default:c(()=>[l(y)]),_:1})]),t("div",Je,[t("div",Ke,C(o.stats.totalSize),1),e[2]||(e[2]=t("div",{class:"stats-label"},"总大小",-1))])]),t("div",Xe,[t("div",Ze,[l(a,{class:"stats-icon-svg"},{default:c(()=>[l(d)]),_:1})]),t("div",Ye,[t("div",et,C(n.formatDate(o.stats.lastModified)),1),e[3]||(e[3]=t("div",{class:"stats-label"},"最近修改",-1))])])])}const nt=T(Ve,[["render",tt],["__scopeId","data-v-d0b37682"]]),ot={name:"Pagination",props:{current:{type:Number,default:1},size:{type:Number,default:10},total:{type:Number,default:0},pages:{type:Number,default:0}},emits:["change-page","change-size"],setup(s){const e=x(()=>{const{current:o,pages:n}=s,v=7;if(n<=v)return Array.from({length:n},(y,d)=>d+1);const _=[],u=Math.floor(v/2);_.push(1);let a=Math.max(2,o-u+1),m=Math.min(n-1,o+u-1);a>2&&_.push("...");for(let y=a;y<=m;y++)y!==1&&y!==n&&_.push(y);return m<n-1&&_.push("..."),n>1&&_.push(n),_});return Q(()=>{window.lucide&&window.lucide.createIcons()}),{visiblePages:e}}},lt={class:"pagination-container"},st={class:"pagination-info"},at={class:"pagination-controls"},it={class:"page-size-selector"},dt=["value"],rt={class:"pagination-buttons"},ct=["disabled"],ut=["disabled"],mt={key:0,class:"pagination-btn pagination-ellipsis",disabled:""},_t=["onClick"],ft=["disabled"],vt=["disabled"];function yt(s,e,o,n,v,_){return r(),f("div",lt,[t("div",st,[t("span",null,"共 "+C(o.total)+" 条记录，第 "+C(o.current)+" / "+C(o.pages)+" 页",1)]),t("div",at,[t("div",it,[e[6]||(e[6]=t("span",null,"每页",-1)),t("select",{value:o.size,onChange:e[0]||(e[0]=u=>s.$emit("change-size",parseInt(u.target.value))),class:"page-size-select"},e[5]||(e[5]=[t("option",{value:"10"},"10",-1),t("option",{value:"20"},"20",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),40,dt),e[7]||(e[7]=t("span",null,"条",-1))]),t("div",rt,[t("button",{class:"pagination-btn",disabled:o.current===1,onClick:e[1]||(e[1]=u=>s.$emit("change-page",1)),title:"首页"},e[8]||(e[8]=[t("i",{"data-lucide":"chevrons-left"},null,-1)]),8,ct),t("button",{class:"pagination-btn",disabled:o.current===1,onClick:e[2]||(e[2]=u=>s.$emit("change-page",o.current-1)),title:"上一页"},e[9]||(e[9]=[t("i",{"data-lucide":"chevron-left"},null,-1)]),8,ut),(r(!0),f(U,null,R(n.visiblePages,u=>(r(),f(U,{key:u},[u==="..."?(r(),f("button",mt," ... ")):(r(),f("button",{key:1,class:E(["pagination-btn",{active:u===o.current}]),onClick:a=>s.$emit("change-page",u)},C(u),11,_t))],64))),128)),t("button",{class:"pagination-btn",disabled:o.current===o.pages,onClick:e[3]||(e[3]=u=>s.$emit("change-page",o.current+1)),title:"下一页"},e[10]||(e[10]=[t("i",{"data-lucide":"chevron-right"},null,-1)]),8,ft),t("button",{class:"pagination-btn",disabled:o.current===o.pages,onClick:e[4]||(e[4]=u=>s.$emit("change-page",o.pages)),title:"末页"},e[11]||(e[11]=[t("i",{"data-lucide":"chevrons-right"},null,-1)]),8,vt)])])])}const ht=T(ot,[["render",yt],["__scopeId","data-v-b3544cdf"]]),bt={name:"DirectoryTable",components:{Pagination:ht,FolderOpened:H,Search:he,Warning:K,Refresh:le,Folder:j,Sort:ee,Edit:oe,Delete:Y,FolderDelete:ne},props:{directories:{type:Array,default:()=>[]},pagination:{type:Object,required:!0},loading:{type:Boolean,default:!1},error:{type:String,default:null},allDirectories:{type:Array,default:()=>[]}},emits:["reload","move","update","delete","change-page","change-size"],setup(s){const e=n=>n?new Date(n).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"--",o=n=>{const v=s.directories.find(u=>u.id===n);if(v)return v.name;const _=s.allDirectories.find(u=>u.id===n);return _?_.name:"未知目录"};return L(()=>s.directories,()=>{}),Q(()=>{}),{formatDateTime:e,getParentDirectoryName:o}}},gt={class:"directory-table-container"},pt={class:"table-header"},Ct={class:"table-title"},Dt={class:"table-actions"},kt={class:"search-box"},wt={class:"table-content"},St={key:0,class:"table-loading"},Mt={key:1,class:"table-error"},Ft={class:"error-icon"},Nt={key:2,class:"directory-table"},It={class:"data-table"},$t={class:"directory-name"},Pt={key:0,class:"directory-badge root"},At={class:"directory-path"},Tt={class:"directory-level"},xt={key:0},Et={key:1,class:"text-muted"},Ot={class:"directory-description"},Vt={class:"directory-time"},zt={class:"directory-actions"},Ut=["onClick","disabled"],Rt=["onClick","disabled"],Bt=["onClick","disabled"],Wt={key:3,class:"directory-pagination"},Lt={key:4,class:"table-empty"},qt={class:"empty-icon"};function jt(s,e,o,n,v,_){const u=i("FolderOpened"),a=i("el-icon"),m=i("Search"),y=i("Warning"),d=i("Refresh"),h=i("Folder"),b=i("Sort"),N=i("Edit"),p=i("Delete"),I=i("Pagination"),P=i("FolderDelete");return r(),f("div",gt,[t("div",pt,[t("div",Ct,[l(a,{class:"table-title-icon"},{default:c(()=>[l(u)]),_:1}),e[3]||(e[3]=t("h3",null,"目录列表",-1))]),t("div",Dt,[t("div",kt,[l(a,{class:"search-icon"},{default:c(()=>[l(m)]),_:1}),e[4]||(e[4]=t("input",{type:"text",placeholder:"搜索目录...",class:"search-input",disabled:""},null,-1))])])]),t("div",wt,[o.loading?(r(),f("div",St,e[5]||(e[5]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"正在加载目录数据...",-1)]))):o.error?(r(),f("div",Mt,[t("div",Ft,[l(a,{class:"error-icon-svg"},{default:c(()=>[l(y)]),_:1})]),e[7]||(e[7]=t("h3",null,"加载失败",-1)),t("p",null,C(o.error),1),t("button",{class:"btn btn-primary btn-sm",onClick:e[0]||(e[0]=D=>s.$emit("reload"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(d)]),_:1}),e[6]||(e[6]=S(" 重新加载 "))])])):o.directories.length>0?(r(),f("div",Nt,[t("table",It,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"目录名称"),t("th",null,"路径"),t("th",null,"层级"),t("th",null,"父目录"),t("th",null,"描述"),t("th",null,"创建时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(r(!0),f(U,null,R(o.directories,D=>(r(),f("tr",{key:D.id},[t("td",null,[t("div",$t,[l(a,{class:"directory-icon"},{default:c(()=>[l(h)]),_:1}),t("span",null,C(D.name),1),D.id===1?(r(),f("span",Pt,"根目录")):w("",!0)])]),t("td",null,[t("code",At,C(D.path),1)]),t("td",null,[t("span",Tt,C(D.level),1)]),t("td",null,[D.parentId?(r(),f("span",xt,C(n.getParentDirectoryName(D.parentId)),1)):(r(),f("span",Et,"无"))]),t("td",null,[t("span",Ot,C(D.description||"暂无描述"),1)]),t("td",null,[t("time",Vt,C(n.formatDateTime(D.createdAt)),1)]),t("td",null,[t("div",zt,[t("button",{class:"btn btn-icon btn-sm btn-primary",title:"移动",onClick:O=>s.$emit("move",D),disabled:D.id===1},[l(a,null,{default:c(()=>[l(b)]),_:1})],8,Ut),t("button",{class:"btn btn-icon btn-sm btn-secondary",title:"更新",onClick:O=>s.$emit("update",D),disabled:D.id===1},[l(a,null,{default:c(()=>[l(N)]),_:1})],8,Rt),t("button",{class:"btn btn-icon btn-sm btn-danger",title:"删除",onClick:O=>s.$emit("delete",D),disabled:D.id===1},[l(a,null,{default:c(()=>[l(p)]),_:1})],8,Bt)])])]))),128))])])])):w("",!0),o.directories.length>0?(r(),f("div",Wt,[l(I,{current:o.pagination.current,size:o.pagination.size,total:o.pagination.total,pages:o.pagination.pages,onChangePage:e[1]||(e[1]=D=>s.$emit("change-page",D)),onChangeSize:e[2]||(e[2]=D=>s.$emit("change-size",D))},null,8,["current","size","total","pages"])])):(r(),f("div",Lt,[t("div",qt,[l(a,{class:"empty-icon-svg"},{default:c(()=>[l(P)]),_:1})]),e[9]||(e[9]=t("h3",null,"暂无目录",-1)),e[10]||(e[10]=t("p",null,"系统中还没有创建任何目录",-1))]))])])}const Ht=T(bt,[["render",jt],["__scopeId","data-v-860827af"]]),Qt={name:"DirectoryTreeViewNode",components:{CaretRight:se,Folder:j,FolderOpened:H,Sort:ee,Edit:oe,Delete:Y},props:{node:{type:Object,required:!0},currentId:{type:[String,Number],default:null},level:{type:Number,default:0},expandAll:{type:Boolean,default:!1},collapseAll:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},showCounts:{type:Boolean,default:!0}},emits:["node-select","node-action"],setup(s,{emit:e}){const o=F(s.level===0),n=x(()=>s.node.children&&s.node.children.length>0);return L(()=>s.expandAll,u=>{u&&n.value&&(o.value=!0)}),L(()=>s.collapseAll,u=>{u&&(o.value=!1)}),{isExpanded:o,hasChildren:n,toggleExpanded:()=>{o.value=!o.value},handleNodeClick:()=>{e("node-select",s.node)}}}},Gt={class:"tree-view-node"},Jt={key:1,class:"node-toggle placeholder"},Kt={class:"node-info"},Xt={class:"node-name"},Zt={key:0,class:"node-counts"},Yt={key:0,class:"file-count"},en={key:1,class:"folder-count"},tn=["disabled"],nn=["disabled"],on=["disabled"],ln={key:0,class:"node-children"};function sn(s,e,o,n,v,_){const u=i("CaretRight"),a=i("el-icon"),m=i("FolderOpened"),y=i("Folder"),d=i("Sort"),h=i("Edit"),b=i("Delete"),N=i("DirectoryTreeViewNode",!0);return r(),f("div",Gt,[t("div",{class:E(["node-content",{active:o.currentId===o.node.id,"has-children":n.hasChildren}]),style:re({paddingLeft:`${o.level*20+16}px`}),onClick:e[5]||(e[5]=(...p)=>n.handleNodeClick&&n.handleNodeClick(...p))},[n.hasChildren?(r(),f("button",{key:0,class:"node-toggle",onClick:e[0]||(e[0]=V((...p)=>n.toggleExpanded&&n.toggleExpanded(...p),["stop"]))},[l(a,{class:E(["toggle-icon",{expanded:n.isExpanded}])},{default:c(()=>[l(u)]),_:1},8,["class"])])):(r(),f("div",Jt)),l(a,{class:E(["node-icon",{expanded:n.isExpanded&&n.hasChildren}])},{default:c(()=>[n.isExpanded&&n.hasChildren?(r(),$(m,{key:0})):(r(),$(y,{key:1}))]),_:1},8,["class"]),t("div",Kt,[t("span",Xt,C(o.node.name),1),o.showCounts?(r(),f("span",Zt,[o.node.fileCount!==void 0?(r(),f("span",Yt,C(o.node.fileCount)+" 文件 ",1)):w("",!0),o.node.folderCount!==void 0?(r(),f("span",en,C(o.node.folderCount)+" 文件夹 ",1)):w("",!0)])):w("",!0)]),o.showActions?(r(),f("div",{key:2,class:"node-actions",onClick:e[4]||(e[4]=V(()=>{},["stop"]))},[t("button",{class:"action-btn",title:"移动",onClick:e[1]||(e[1]=p=>s.$emit("node-action","move",o.node)),disabled:o.node.id===1},[l(a,null,{default:c(()=>[l(d)]),_:1})],8,tn),t("button",{class:"action-btn",title:"编辑",onClick:e[2]||(e[2]=p=>s.$emit("node-action","edit",o.node)),disabled:o.node.id===1},[l(a,null,{default:c(()=>[l(h)]),_:1})],8,nn),t("button",{class:"action-btn danger",title:"删除",onClick:e[3]||(e[3]=p=>s.$emit("node-action","delete",o.node)),disabled:o.node.id===1},[l(a,null,{default:c(()=>[l(b)]),_:1})],8,on)])):w("",!0)],6),n.hasChildren&&n.isExpanded?(r(),f("div",ln,[(r(!0),f(U,null,R(o.node.children,p=>(r(),$(N,{key:p.id,node:p,"current-id":o.currentId,level:o.level+1,"expand-all":o.expandAll,"collapse-all":o.collapseAll,"show-actions":o.showActions,"show-counts":o.showCounts,onNodeSelect:e[6]||(e[6]=I=>s.$emit("node-select",I)),onNodeAction:e[7]||(e[7]=I=>s.$emit("node-action",I,arguments[1]))},null,8,["node","current-id","level","expand-all","collapse-all","show-actions","show-counts"]))),128))])):w("",!0)])}const an=T(Qt,[["render",sn],["__scopeId","data-v-a3e191af"]]),dn={name:"DirectoryTreeView",components:{DirectoryTreeViewNode:an,FolderOpened:H,Plus:ge,Minus:be,Warning:K,Refresh:le,FolderDelete:ne},props:{directories:{type:Array,default:()=>[]},currentId:{type:[String,Number],default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["node-select","node-action","reload"],setup(s,{emit:e}){const o=F(!1),n=F(!1);return{expandAllFlag:o,collapseAllFlag:n,expandAll:()=>{o.value=!o.value},collapseAll:()=>{n.value=!n.value},handleNodeSelect:m=>{e("node-select",m)},handleNodeAction:(m,y)=>{e("node-action",m,y)}}}},rn={class:"directory-tree-view"},cn={class:"tree-header"},un={class:"tree-title"},mn={class:"tree-actions"},_n={class:"tree-content"},fn={key:0,class:"tree-loading"},vn={key:1,class:"tree-error"},yn={class:"error-icon"},hn={key:2,class:"tree-nodes"},bn={key:3,class:"tree-placeholder"},gn={class:"placeholder-icon"};function pn(s,e,o,n,v,_){const u=i("FolderOpened"),a=i("el-icon"),m=i("Plus"),y=i("Minus"),d=i("Warning"),h=i("Refresh"),b=i("DirectoryTreeViewNode"),N=i("FolderDelete");return r(),f("div",rn,[t("div",cn,[t("div",un,[l(a,{class:"tree-title-icon"},{default:c(()=>[l(u)]),_:1}),e[3]||(e[3]=t("h3",null,"目录结构",-1))]),t("div",mn,[t("button",{class:"btn btn-icon btn-sm",title:"展开所有",onClick:e[0]||(e[0]=(...p)=>n.expandAll&&n.expandAll(...p))},[l(a,null,{default:c(()=>[l(m)]),_:1})]),t("button",{class:"btn btn-icon btn-sm",title:"折叠所有",onClick:e[1]||(e[1]=(...p)=>n.collapseAll&&n.collapseAll(...p))},[l(a,null,{default:c(()=>[l(y)]),_:1})])])]),t("div",_n,[o.loading?(r(),f("div",fn,e[4]||(e[4]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"加载目录结构中...",-1)]))):o.error?(r(),f("div",vn,[t("div",yn,[l(a,{class:"error-icon-svg"},{default:c(()=>[l(d)]),_:1})]),e[6]||(e[6]=t("h4",null,"加载失败",-1)),t("p",null,C(o.error),1),t("button",{class:"btn btn-primary btn-sm",onClick:e[2]||(e[2]=p=>s.$emit("reload"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(h)]),_:1}),e[5]||(e[5]=S(" 重新加载 "))])])):o.directories.length>0?(r(),f("div",hn,[(r(!0),f(U,null,R(o.directories,p=>(r(),$(b,{key:p.id,node:p,"current-id":o.currentId,level:0,"expand-all":n.expandAllFlag,"collapse-all":n.collapseAllFlag,onNodeSelect:n.handleNodeSelect,onNodeAction:n.handleNodeAction},null,8,["node","current-id","expand-all","collapse-all","onNodeSelect","onNodeAction"]))),128))])):(r(),f("div",bn,[t("div",gn,[l(a,{class:"placeholder-icon-svg"},{default:c(()=>[l(N)]),_:1})]),e[7]||(e[7]=t("h4",null,"暂无目录",-1)),e[8]||(e[8]=t("p",null,"系统中还没有创建任何目录",-1))]))])])}const Cn=T(dn,[["render",pn],["__scopeId","data-v-4da0eacd"]]),Dn={name:"Toast",components:{CircleCheck:De,CircleClose:Ce,Warning:K,InfoFilled:pe},props:{message:{type:String,required:!0},type:{type:String,default:"success",validator:s=>["success","error","warning","info"].includes(s)},duration:{type:Number,default:2e3}},emits:["close"],setup(s,{emit:e}){const o=F(!0);let n=null;const v=()=>{o.value=!1,setTimeout(()=>{e("close")},300)};return Q(()=>{n=setTimeout(()=>{v()},s.duration)}),xe(()=>{n&&clearTimeout(n)}),{show:o,close:v}}},kn={class:"toast-content"},wn={class:"toast-icon"},Sn={class:"toast-message"};function Mn(s,e,o,n,v,_){const u=i("CircleCheck"),a=i("el-icon"),m=i("CircleClose"),y=i("Warning"),d=i("InfoFilled");return r(),$(Te,{name:"toast",appear:""},{default:c(()=>[n.show?(r(),f("div",{key:0,class:E(["toast",`toast-${o.type}`])},[t("div",kn,[t("div",wn,[o.type==="success"?(r(),$(a,{key:0},{default:c(()=>[l(u)]),_:1})):o.type==="error"?(r(),$(a,{key:1},{default:c(()=>[l(m)]),_:1})):o.type==="warning"?(r(),$(a,{key:2},{default:c(()=>[l(y)]),_:1})):(r(),$(a,{key:3},{default:c(()=>[l(d)]),_:1}))]),t("div",Sn,C(o.message),1)])],2)):w("",!0)]),_:1})}const Fn=T(Dn,[["render",Mn],["__scopeId","data-v-e42ede67"]]);class Nn{constructor(){this.toasts=[]}show(e,o="success",n=2e3){const v=document.createElement("div");document.body.appendChild(v);const _=Ee(Fn,{message:e,type:o,duration:n,onClose:()=>{_.unmount(),v.parentNode&&v.parentNode.removeChild(v);const u=this.toasts.indexOf(_);u>-1&&this.toasts.splice(u,1)}});_.use(ke);for(const[u,a]of Object.entries(we))_.component(u,a);return _.mount(v),this.toasts.push(_),_}success(e,o=2e3){return this.show(e,"success",o)}error(e,o=3e3){return this.show(e,"error",o)}warning(e,o=2500){return this.show(e,"warning",o)}info(e,o=2e3){return this.show(e,"info",o)}clear(){this.toasts.forEach(e=>{e.unmount()}),this.toasts=[]}}const M=new Nn,In={name:"UpdateDirectoryModal",components:{EditPen:ae,Close:X,Check:te},props:{show:{type:Boolean,default:!1},directory:{type:Object,default:null}},emits:["update","cancel"],setup(s,{emit:e}){const o=F({name:"",description:""});return L(()=>s.directory,_=>{_&&(o.value={name:_.name||"",description:_.description||""})},{immediate:!0}),{formData:o,handleSubmit:()=>{const _=o.value.name.trim();if(!_){M.warning("目录名称不能为空");return}e("update",{name:_,description:o.value.description.trim()})},handleCancel:()=>{e("cancel")}}}},$n={class:"modal-header"},Pn={class:"modal-title"},An={class:"modal-body"},Tn={class:"form-group"},xn={class:"form-group"},En={class:"modal-footer"},On=["disabled"];function Vn(s,e,o,n,v,_){const u=i("EditPen"),a=i("el-icon"),m=i("Close"),y=i("Check");return o.show?(r(),f("div",{key:0,class:"modal-overlay",onClick:e[7]||(e[7]=d=>s.$emit("cancel"))},[t("div",{class:"modal-content",onClick:e[6]||(e[6]=V(()=>{},["stop"]))},[t("div",$n,[t("div",Pn,[l(a,{class:"modal-icon"},{default:c(()=>[l(u)]),_:1}),e[8]||(e[8]=t("h3",null,"更新目录",-1))]),t("button",{class:"modal-close",onClick:e[0]||(e[0]=d=>s.$emit("cancel"))},[l(a,null,{default:c(()=>[l(m)]),_:1})])]),t("div",An,[t("form",{onSubmit:e[3]||(e[3]=V((...d)=>n.handleSubmit&&n.handleSubmit(...d),["prevent"]))},[t("div",Tn,[e[9]||(e[9]=t("label",{for:"directoryName",class:"form-label"},"目录名称",-1)),q(t("input",{id:"directoryName","onUpdate:modelValue":e[1]||(e[1]=d=>n.formData.name=d),type:"text",class:"form-input",placeholder:"请输入目录名称",required:""},null,512),[[J,n.formData.name]])]),t("div",xn,[e[10]||(e[10]=t("label",{for:"directoryDescription",class:"form-label"},"目录描述",-1)),q(t("textarea",{id:"directoryDescription","onUpdate:modelValue":e[2]||(e[2]=d=>n.formData.description=d),class:"form-textarea",placeholder:"请输入目录描述（可选）",rows:"3"},null,512),[[J,n.formData.description]])])],32)]),t("div",En,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[4]||(e[4]=d=>s.$emit("cancel"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(m)]),_:1}),e[11]||(e[11]=S(" 取消 "))]),t("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...d)=>n.handleSubmit&&n.handleSubmit(...d)),disabled:!n.formData.name.trim()},[l(a,{class:"btn-icon"},{default:c(()=>[l(y)]),_:1}),e[12]||(e[12]=S(" 保存 "))],8,On)])])])):w("",!0)}const zn=T(In,[["render",Vn],["__scopeId","data-v-0a54f9c8"]]),Un={name:"DeleteDirectoryModal",components:{Delete:Y,Close:X,WarningFilled:Se},props:{show:{type:Boolean,default:!1},directory:{type:Object,default:null}},emits:["confirm","cancel"],setup(s,{emit:e}){return{handleConfirm:()=>{e("confirm")},handleCancel:()=>{e("cancel")}}}},Rn={class:"modal-header"},Bn={class:"modal-title"},Wn={class:"modal-body"},Ln={class:"warning-content"},qn={class:"warning-icon"},jn={class:"warning-text"},Hn={class:"modal-footer"};function Qn(s,e,o,n,v,_){var d;const u=i("Delete"),a=i("el-icon"),m=i("Close"),y=i("WarningFilled");return o.show?(r(),f("div",{key:0,class:"modal-overlay",onClick:e[4]||(e[4]=h=>s.$emit("cancel"))},[t("div",{class:"modal-content",onClick:e[3]||(e[3]=V(()=>{},["stop"]))},[t("div",Rn,[t("div",Bn,[l(a,{class:"modal-icon text-danger"},{default:c(()=>[l(u)]),_:1}),e[5]||(e[5]=t("h3",null,"删除目录",-1))]),t("button",{class:"modal-close",onClick:e[0]||(e[0]=h=>s.$emit("cancel"))},[l(a,null,{default:c(()=>[l(m)]),_:1})])]),t("div",Wn,[t("div",Ln,[t("div",qn,[l(a,{class:"warning-icon-svg"},{default:c(()=>[l(y)]),_:1})]),t("div",jn,[e[8]||(e[8]=t("h4",null,"确认删除目录",-1)),t("p",null,[e[6]||(e[6]=S("您即将删除目录 ")),t("strong",null,C((d=o.directory)==null?void 0:d.name),1),e[7]||(e[7]=S("，此操作不可恢复。"))]),e[9]||(e[9]=t("p",{class:"warning-note"},"请确认您真的要执行此操作。",-1))])])]),t("div",Hn,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=h=>s.$emit("cancel"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(m)]),_:1}),e[10]||(e[10]=S(" 取消 "))]),t("button",{type:"button",class:"btn btn-danger",onClick:e[2]||(e[2]=h=>s.$emit("confirm"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(u)]),_:1}),e[11]||(e[11]=S(" 确认删除 "))])])])])):w("",!0)}const Gn=T(Un,[["render",Qn],["__scopeId","data-v-46239ff7"]]),Jn={name:"DirectoryTreeNode",components:{CaretRight:se,Folder:j},props:{directory:{type:Object,required:!0},selectedId:{type:[String,Number],default:null},disabledId:{type:[String,Number],default:null},level:{type:Number,default:0}},emits:["select"],setup(s,{emit:e}){const o=F(!1),n=x(()=>s.directory.children&&s.directory.children.length>0);return{isExpanded:o,hasChildren:n,toggleExpanded:()=>{o.value=!o.value},handleSelect:()=>{s.disabledId!==s.directory.id&&e("select",s.directory.id)}}}},Kn={class:"tree-node"},Xn={key:1,class:"node-spacer"},Zn=["checked","disabled"],Yn={class:"node-info"},eo={class:"node-name"},to={class:"node-path"},no={key:2,class:"node-disabled-tag"},oo={key:0,class:"node-children"};function lo(s,e,o,n,v,_){const u=i("CaretRight"),a=i("el-icon"),m=i("Folder"),y=i("DirectoryTreeNode",!0);return r(),f("div",Kn,[t("div",{class:E(["node-item",{selected:o.selectedId===o.directory.id,disabled:o.disabledId===o.directory.id}]),style:re({paddingLeft:`${o.level*20+16}px`}),onClick:e[1]||(e[1]=(...d)=>n.handleSelect&&n.handleSelect(...d))},[n.hasChildren?(r(),f("button",{key:0,class:"node-toggle",onClick:e[0]||(e[0]=V((...d)=>n.toggleExpanded&&n.toggleExpanded(...d),["stop"]))},[l(a,{class:E(["toggle-icon",{expanded:n.isExpanded}])},{default:c(()=>[l(u)]),_:1},8,["class"])])):(r(),f("div",Xn)),t("input",{type:"radio",checked:o.selectedId===o.directory.id,disabled:o.disabledId===o.directory.id,readonly:"",class:"node-radio"},null,8,Zn),l(a,{class:"node-icon"},{default:c(()=>[l(m)]),_:1}),t("div",Yn,[t("span",eo,C(o.directory.name),1),t("span",to,C(o.directory.path),1)]),o.disabledId===o.directory.id?(r(),f("span",no," 当前目录 ")):w("",!0)],6),n.isExpanded&&n.hasChildren?(r(),f("div",oo,[(r(!0),f(U,null,R(o.directory.children,d=>(r(),$(y,{key:d.id,directory:d,"selected-id":o.selectedId,"disabled-id":o.disabledId,level:o.level+1,onSelect:e[2]||(e[2]=h=>s.$emit("select",h))},null,8,["directory","selected-id","disabled-id","level"]))),128))])):w("",!0)])}const so=T(Jn,[["render",lo],["__scopeId","data-v-29b10a20"]]),ao={name:"MoveDirectoryModal",components:{DirectoryTreeNode:so,Sort:ee,Close:X,Folder:j,FolderOpened:H,HomeFilled:ie,Warning:K,View:Ne,Right:Fe,Check:te,Loading:Me},props:{show:{type:Boolean,default:!1},directory:{type:Object,default:null},directories:{type:Array,default:()=>[]}},emits:["move","cancel"],setup(s,{emit:e}){const o=F(null),n=F(!1),v=F(""),_=x(()=>{if(!s.directory)return s.directories;const b=(N,p,I)=>N.filter(P=>!(P.id===p||P.path&&I&&P.path.startsWith(I+"/"))).map(P=>({...P,children:P.children?b(P.children,p,I):[]}));return b(s.directories,s.directory.id,s.directory.path)}),u=x(()=>{var b;return o.value!==((b=s.directory)==null?void 0:b.parentId)}),a=x(()=>{if(!s.directory)return null;let b="";if(o.value===null)b=`/${s.directory.name}`;else{const N=m(o.value,s.directories);N&&(b=`${N.path}/${s.directory.name}`)}return{newPath:b,oldPath:s.directory.path}}),m=(b,N)=>{for(const p of N){if(p.id===b)return p;if(p.children){const I=m(b,p.children);if(I)return I}}return null},y=b=>{o.value=b,v.value=""},d=async()=>{if(!u.value){v.value="不能移动到相同位置";return}n.value=!0,v.value="";try{e("move",{directoryId:s.directory.id,newParentId:o.value})}catch(b){v.value=b.message||"移动失败"}finally{n.value=!1}},h=b=>{b.target===b.currentTarget&&e("cancel")};return L(()=>s.show,b=>{b&&(o.value=null,v.value="",n.value=!1)}),{selectedParentId:o,loading:n,error:v,availableDirectories:_,canMove:u,movePreview:a,selectDirectory:y,handleMove:d,handleOverlayClick:h}}},io={class:"modal-container"},ro={class:"modal-header"},co={class:"header-icon"},uo={class:"header-text"},mo={class:"modal-subtitle"},_o={class:"modal-body"},fo={class:"current-directory"},vo={class:"info-item"},yo={class:"current-path"},ho={class:"form-group"},bo={class:"form-label required"},go={class:"option-content"},po=["checked"],Co={class:"directory-tree"},Do={key:0,class:"form-error"},ko={key:0,class:"move-preview"},wo={class:"preview-title"},So={class:"preview-content"},Mo={class:"preview-item"},Fo={class:"preview-path from"},No={class:"preview-arrow"},Io={class:"preview-item"},$o={class:"preview-path to"},Po={class:"modal-footer"},Ao=["disabled"];function To(s,e,o,n,v,_){var O,B,W;const u=i("Sort"),a=i("el-icon"),m=i("Close"),y=i("Folder"),d=i("FolderOpened"),h=i("HomeFilled"),b=i("DirectoryTreeNode"),N=i("Warning"),p=i("View"),I=i("Right"),P=i("Loading"),D=i("Check");return o.show?(r(),f("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=(...A)=>n.handleOverlayClick&&n.handleOverlayClick(...A))},[t("div",io,[t("div",ro,[t("div",co,[l(a,{class:"header-icon-svg"},{default:c(()=>[l(u)]),_:1})]),t("div",uo,[e[6]||(e[6]=t("h3",{class:"modal-title"},"移动目录",-1)),t("p",mo,' 将目录 "'+C((O=o.directory)==null?void 0:O.name)+'" 移动到新位置 ',1)]),t("button",{class:"btn btn-close",onClick:e[0]||(e[0]=A=>s.$emit("cancel"))},[l(a,null,{default:c(()=>[l(m)]),_:1})])]),t("div",_o,[t("form",{onSubmit:e[2]||(e[2]=V((...A)=>n.handleMove&&n.handleMove(...A),["prevent"]))},[t("div",fo,[t("div",vo,[e[7]||(e[7]=t("label",null,"当前目录：",-1)),t("div",yo,[l(a,{class:"path-icon"},{default:c(()=>[l(y)]),_:1}),t("span",null,C(((B=o.directory)==null?void 0:B.path)||"/"),1)])])]),t("div",ho,[t("label",bo,[l(a,{class:"label-icon"},{default:c(()=>[l(d)]),_:1}),e[8]||(e[8]=S(" 选择目标目录 "))]),e[11]||(e[11]=t("p",{class:"form-hint"},"选择要移动到的目标目录，留空表示移动到根目录",-1)),t("div",{class:"directory-option",onClick:e[1]||(e[1]=A=>n.selectDirectory(null))},[t("div",go,[t("input",{type:"radio",checked:n.selectedParentId===null,readonly:"",class:"option-radio"},null,8,po),l(a,{class:"option-icon root-icon"},{default:c(()=>[l(h)]),_:1}),e[9]||(e[9]=t("span",{class:"option-text"},"根目录",-1)),e[10]||(e[10]=t("span",{class:"option-path"},"/",-1))])]),t("div",Co,[(r(!0),f(U,null,R(n.availableDirectories,A=>{var z;return r(),$(b,{key:A.id,directory:A,"selected-id":n.selectedParentId,"disabled-id":(z=o.directory)==null?void 0:z.id,level:0,onSelect:n.selectDirectory},null,8,["directory","selected-id","disabled-id","onSelect"])}),128))]),n.error?(r(),f("div",Do,[l(a,{class:"error-icon"},{default:c(()=>[l(N)]),_:1}),S(" "+C(n.error),1)])):w("",!0)]),n.movePreview?(r(),f("div",ko,[t("h4",wo,[l(a,{class:"preview-icon"},{default:c(()=>[l(p)]),_:1}),e[12]||(e[12]=S(" 移动预览 "))]),t("div",So,[t("div",Mo,[e[13]||(e[13]=t("span",{class:"preview-label"},"原路径：",-1)),t("span",Fo,C((W=o.directory)==null?void 0:W.path),1)]),t("div",No,[l(a,null,{default:c(()=>[l(I)]),_:1})]),t("div",Io,[e[14]||(e[14]=t("span",{class:"preview-label"},"新路径：",-1)),t("span",$o,C(n.movePreview.newPath),1)])])])):w("",!0)],32)]),t("div",Po,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[3]||(e[3]=A=>s.$emit("cancel"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(m)]),_:1}),e[15]||(e[15]=S(" 取消 "))]),t("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...A)=>n.handleMove&&n.handleMove(...A)),disabled:n.loading||!n.canMove},[l(a,{class:E(["btn-icon",{loading:n.loading}])},{default:c(()=>[n.loading?(r(),$(P,{key:0})):(r(),$(D,{key:1}))]),_:1},8,["class"]),S(" "+C(n.loading?"移动中...":"确认移动"),1)],8,Ao)])])])):w("",!0)}const xo=T(ao,[["render",To],["__scopeId","data-v-d205a885"]]),Eo={name:"CreateDirectoryModal",components:{FolderAdd:de,Close:X,Check:te},props:{show:{type:Boolean,default:!1},directories:{type:Array,default:()=>[]}},emits:["create","cancel"],setup(s,{emit:e}){const o=F({name:"",description:"",parentId:null}),n=F(!1),v=x(()=>s.directories&&s.directories.length>0?s.directories[0].id:1),_=x(()=>s.directories.map(h=>({...h,path:h.path||`/${h.name}`,level:(h.path||`/${h.name}`).split("/").length-1})).sort((h,b)=>h.path.localeCompare(b.path,"zh-CN"))),u=x(()=>_.value.filter(d=>d.id!==v.value&&d.path!=="/")),a=x(()=>{if(!o.value.name.trim())return"";if(o.value.parentId===v.value)return`/${o.value.name}`;const d=_.value.find(h=>h.id===o.value.parentId);return d?`${d.path}/${o.value.name}`:`/${o.value.name}`}),m=d=>{const h=d.level||0;return`${"　".repeat(h)}${d.path}`};return L(()=>s.show,d=>{d&&(o.value={name:"",description:"",parentId:v.value},n.value=!1)}),{formData:o,isSubmitting:n,rootDirectoryId:v,availableDirectories:_,filteredDirectories:u,previewPath:a,getDisplayPath:m,handleSubmit:async()=>{const d=o.value.name.trim();if(!d){M.warning("文件夹名称不能为空");return}if(d.length>100){M.warning("文件夹名称不能超过100个字符");return}if(o.value.description.length>500){M.warning("文件夹描述不能超过500个字符");return}n.value=!0;try{const h={name:d,description:o.value.description.trim(),parentId:o.value.parentId};await e("create",h)}catch(h){console.error("创建文件夹失败:",h)}finally{n.value=!1}}}}},Oo={class:"modal-header"},Vo={class:"modal-title"},zo={class:"modal-body"},Uo={class:"form-group"},Ro=["value"],Bo=["value"],Wo={class:"form-group"},Lo={class:"form-group"},qo={class:"form-hint"},jo={key:0,class:"form-preview"},Ho={class:"preview-path"},Qo={class:"modal-footer"},Go=["disabled"],Jo={key:1,class:"loading-spinner"};function Ko(s,e,o,n,v,_){const u=i("FolderAdd"),a=i("el-icon"),m=i("Close"),y=i("Check");return o.show?(r(),f("div",{key:0,class:"modal-overlay",onClick:e[8]||(e[8]=d=>s.$emit("cancel"))},[t("div",{class:"modal-content",onClick:e[7]||(e[7]=V(()=>{},["stop"]))},[t("div",Oo,[t("div",Vo,[l(a,{class:"modal-icon"},{default:c(()=>[l(u)]),_:1}),e[9]||(e[9]=t("h3",null,"新建文件夹",-1))]),t("button",{class:"modal-close",onClick:e[0]||(e[0]=d=>s.$emit("cancel"))},[l(a,null,{default:c(()=>[l(m)]),_:1})])]),t("div",zo,[t("form",{onSubmit:e[4]||(e[4]=V((...d)=>n.handleSubmit&&n.handleSubmit(...d),["prevent"]))},[t("div",Uo,[e[10]||(e[10]=t("label",{for:"parentDirectory",class:"form-label"},"创建位置",-1)),q(t("select",{id:"parentDirectory","onUpdate:modelValue":e[1]||(e[1]=d=>n.formData.parentId=d),class:"form-select"},[t("option",{value:n.rootDirectoryId},"根目录",8,Ro),(r(!0),f(U,null,R(n.filteredDirectories,d=>(r(),f("option",{key:d.id,value:d.id},C(n.getDisplayPath(d)),9,Bo))),128))],512),[[Oe,n.formData.parentId]])]),t("div",Wo,[e[11]||(e[11]=t("label",{for:"directoryName",class:"form-label"},[S("文件夹名称 "),t("span",{class:"required"},"*")],-1)),q(t("input",{id:"directoryName","onUpdate:modelValue":e[2]||(e[2]=d=>n.formData.name=d),type:"text",class:"form-input",placeholder:"请输入文件夹名称",maxlength:"100",required:""},null,512),[[J,n.formData.name]]),e[12]||(e[12]=t("div",{class:"form-hint"},"最多100个字符",-1))]),t("div",Lo,[e[13]||(e[13]=t("label",{for:"directoryDescription",class:"form-label"},"文件夹描述",-1)),q(t("textarea",{id:"directoryDescription","onUpdate:modelValue":e[3]||(e[3]=d=>n.formData.description=d),class:"form-textarea",placeholder:"请输入文件夹描述（可选）",rows:"3",maxlength:"500"},null,512),[[J,n.formData.description]]),t("div",qo,"最多500个字符，当前 "+C(n.formData.description.length)+"/500",1)]),n.previewPath?(r(),f("div",jo,[e[14]||(e[14]=t("div",{class:"preview-label"},"预览路径：",-1)),t("div",Ho,C(n.previewPath),1)])):w("",!0)],32)]),t("div",Qo,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[5]||(e[5]=d=>s.$emit("cancel"))},[l(a,{class:"btn-icon"},{default:c(()=>[l(m)]),_:1}),e[15]||(e[15]=S(" 取消 "))]),t("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...d)=>n.handleSubmit&&n.handleSubmit(...d)),disabled:!n.formData.name.trim()||n.isSubmitting},[n.isSubmitting?w("",!0):(r(),$(a,{key:0,class:"btn-icon"},{default:c(()=>[l(y)]),_:1})),n.isSubmitting?(r(),f("div",Jo)):w("",!0),S(" "+C(n.isSubmitting?"创建中...":"创建"),1)],8,Go)])])])):w("",!0)}const Xo=T(Eo,[["render",Ko],["__scopeId","data-v-b72ca946"]]),Zo={name:"DirectoryManagement",components:{DirectoryStats:nt,DirectoryTable:Ht,DirectoryTreeView:Cn,UpdateDirectoryModal:zn,DeleteDirectoryModal:Gn,MoveDirectoryModal:xo,CreateDirectoryModal:Xo,Setting:Pe,FolderOpened:H,HomeFilled:ie,FolderAdd:de,EditPen:ae,List:$e,Share:Ie},setup(){const s=F(_e),e=Ae(),o=F("table"),n=F(null),v=F(!1),_=F(!1),u=F(!1),a=F(!1),m=F(null),y=x(()=>{const g=k=>{let Z=[];return k.forEach(G=>{Z.push(G),G.children&&G.children.length>0&&Z.push(...g(G.children))}),Z};return g(e.directoryTree)}),d=async()=>{try{await e.fetchDirectoriesPage()}catch(g){console.error("加载目录失败:",g)}},h=async g=>{await e.changePage(g)},b=async g=>{await e.changePageSize(g)},N=g=>{m.value=g,u.value=!0},p=g=>{m.value=g,v.value=!0},I=g=>{m.value=g,_.value=!0},P=()=>{a.value=!0},D=g=>{o.value=g},O=async()=>{try{await e.fetchDirectoryTree()}catch(g){console.error("加载目录树失败:",g)}},B=g=>{n.value=g.id,e.setCurrentDirectory(g)},W=(g,k)=>{switch(m.value=k,g){case"move":u.value=!0;break;case"edit":v.value=!0;break;case"delete":_.value=!0;break;default:console.warn("未知的节点操作:",g)}},A=async g=>{if(m.value)try{await e.updateDirectory(m.value.id,g),v.value=!1,m.value=null,M.success("目录更新成功！")}catch(k){console.error("更新目录失败:",k),M.error(k.message||"更新目录失败")}},z=async()=>{if(m.value)try{await e.deleteDirectory(m.value.id),_.value=!1,m.value=null,M.success("目录删除成功！")}catch(g){console.error("删除目录失败:",g),M.error(g.message||"删除目录失败")}},ce=async g=>{if(m.value)try{await e.moveDirectory(g.directoryId,g.newParentId),u.value=!1,m.value=null,M.success("目录移动成功！")}catch(k){console.error("移动目录失败:",k),k.message.includes("目录名称重复")||k.message.includes("重复")?M.error("目标目录下已存在同名目录"):k.message.includes("目录不存在")?M.error("目标目录不存在，请重新选择"):k.message.includes("循环引用")||k.message.includes("子目录")?M.error("不能移动到自己的子目录下"):k.message.includes("根目录")?M.error("不能移动根目录"):M.error(k.message||"移动目录失败")}},ue=async g=>{try{await e.createDirectory(g),a.value=!1,M.success("目录创建成功！")}catch(k){console.error("创建目录失败:",k),k.message.includes("目录名称重复")||k.message.includes("重复")?M.error("目录名称重复，请使用其他名称"):k.message.includes("目录不存在")?M.error("父目录不存在，请重新选择"):k.message.includes("不能为空")?M.warning("目录名称不能为空"):M.error(k.message||"创建目录失败")}},me=()=>{v.value=!1,_.value=!1,u.value=!1,a.value=!1,m.value=null};return Q(async()=>{await Promise.all([d(),e.fetchDirectoryTree()])}),{stats:s,directoryStore:e,allDirectories:y,loadDirectories:d,handlePageChange:h,handlePageSizeChange:b,viewMode:o,currentDirectoryId:n,setViewMode:D,loadDirectoryTree:O,handleNodeSelect:B,handleNodeAction:W,showUpdateModal:v,showDeleteModal:_,showMoveModal:u,showCreateModal:a,currentDirectory:m,handleMoveDirectory:N,handleUpdateDirectory:p,handleDeleteDirectory:I,handleCreateDirectory:P,confirmUpdate:A,confirmDelete:z,confirmMove:ce,confirmCreate:ue,cancelOperation:me}}},Yo={class:"directory-management"},el={class:"directory-management-container"},tl={class:"page-header"},nl={class:"header-content"},ol={class:"header-icon"},ll={class:"header-actions"},sl={class:"toolbar"},al={class:"toolbar-left"},il={class:"btn btn-outline",disabled:""},dl={class:"toolbar-right"},rl={class:"view-switcher"},cl={class:"main-content"};function ul(s,e,o,n,v,_){const u=i("Setting"),a=i("el-icon"),m=i("FolderOpened"),y=i("router-link"),d=i("HomeFilled"),h=i("FolderAdd"),b=i("EditPen"),N=i("List"),p=i("Share"),I=i("DirectoryStats"),P=i("DirectoryTable"),D=i("DirectoryTreeView"),O=i("UpdateDirectoryModal"),B=i("DeleteDirectoryModal"),W=i("MoveDirectoryModal"),A=i("CreateDirectoryModal");return r(),f("div",Yo,[t("div",el,[t("header",tl,[t("div",nl,[t("div",ol,[l(a,{class:"header-icon-svg"},{default:c(()=>[l(u)]),_:1})]),e[3]||(e[3]=t("div",{class:"header-text"},[t("h1",{class:"page-title"},"目录管理"),t("p",{class:"page-subtitle"},"管理文件夹结构和权限")],-1))]),t("div",ll,[l(y,{to:"/files",class:"btn btn-secondary"},{default:c(()=>[l(a,{class:"btn-icon"},{default:c(()=>[l(m)]),_:1}),e[4]||(e[4]=S(" 文件管理 "))]),_:1}),l(y,{to:"/",class:"btn btn-secondary"},{default:c(()=>[l(a,{class:"btn-icon"},{default:c(()=>[l(d)]),_:1}),e[5]||(e[5]=S(" 返回首页 "))]),_:1})])]),t("div",sl,[t("div",al,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...z)=>n.handleCreateDirectory&&n.handleCreateDirectory(...z))},[l(a,{class:"btn-icon"},{default:c(()=>[l(h)]),_:1}),e[6]||(e[6]=S(" 新建文件夹 "))]),t("button",il,[l(a,{class:"btn-icon"},{default:c(()=>[l(b)]),_:1}),e[7]||(e[7]=S(" 批量操作 "))])]),t("div",dl,[t("div",rl,[t("button",{class:E(["btn btn-icon",{active:n.viewMode==="table"}]),title:"列表视图",onClick:e[1]||(e[1]=z=>n.setViewMode("table"))},[l(a,{class:"view-icon"},{default:c(()=>[l(N)]),_:1})],2),t("button",{class:E(["btn btn-icon",{active:n.viewMode==="tree"}]),title:"树形视图",onClick:e[2]||(e[2]=z=>n.setViewMode("tree"))},[l(a,{class:"view-icon"},{default:c(()=>[l(p)]),_:1})],2)])])]),t("div",cl,[l(I,{stats:n.stats},null,8,["stats"]),n.viewMode==="table"?(r(),$(P,{key:0,directories:n.directoryStore.pageDirectories,pagination:n.directoryStore.pagination,loading:n.directoryStore.loading,error:n.directoryStore.error,"all-directories":n.allDirectories,onReload:n.loadDirectories,onMove:n.handleMoveDirectory,onUpdate:n.handleUpdateDirectory,onDelete:n.handleDeleteDirectory,onChangePage:n.handlePageChange,onChangeSize:n.handlePageSizeChange},null,8,["directories","pagination","loading","error","all-directories","onReload","onMove","onUpdate","onDelete","onChangePage","onChangeSize"])):w("",!0),n.viewMode==="tree"?(r(),$(D,{key:1,directories:n.directoryStore.directoryTree,loading:n.directoryStore.loading,error:n.directoryStore.error,"current-id":n.currentDirectoryId,onNodeSelect:n.handleNodeSelect,onNodeAction:n.handleNodeAction,onReload:n.loadDirectoryTree},null,8,["directories","loading","error","current-id","onNodeSelect","onNodeAction","onReload"])):w("",!0)])]),l(O,{show:n.showUpdateModal,directory:n.currentDirectory,onUpdate:n.confirmUpdate,onCancel:n.cancelOperation},null,8,["show","directory","onUpdate","onCancel"]),l(B,{show:n.showDeleteModal,directory:n.currentDirectory,onConfirm:n.confirmDelete,onCancel:n.cancelOperation},null,8,["show","directory","onConfirm","onCancel"]),l(W,{show:n.showMoveModal,directory:n.currentDirectory,directories:n.allDirectories,onMove:n.confirmMove,onCancel:n.cancelOperation},null,8,["show","directory","directories","onMove","onCancel"]),l(A,{show:n.showCreateModal,directories:n.allDirectories,onCreate:n.confirmCreate,onCancel:n.cancelOperation},null,8,["show","directories","onCreate","onCancel"])])}const hl=T(Zo,[["render",ul],["__scopeId","data-v-9ec16338"]]);export{hl as default};
